# 事务

指作为单个逻辑工作单元执行的一系列操作，要么完全地执行，要么完全地不执行。

简单的说，事务就是并发控制的单位，是用户定义的一个操作序列。

事务命令：

```transaction
标记一个事务块的开始
> MULTI

执行所有事务块内的命令
> EXEC

取消事务，放弃执行事务块内的所有命令
> DISCARD

监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断
> WATCH key [key ...]

取消 WATCH 命令对所有 key 的监视
> UNWATCH
```

在 redis 中，事务总是具有原子性（Atomicity）、一致性（Consistency）和隔离性（Isolation），并且当 redis 运行在某种特定的持久化模式下时，事务也具有持久性（Durability）。

redis 事务可以一次执行多个命令， 并且带有以下三个重要的保证：

* 批量操作在发送 EXEC 命令前被放入队列缓存
* 收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行
* 在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中
